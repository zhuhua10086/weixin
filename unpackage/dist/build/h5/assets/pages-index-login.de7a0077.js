import{u as e,A as a,B as s,o as l,a as o,w as r,g as t,d as u,f as i,q as n,y as d,r as m,z as p}from"./index-967b4fa7.js";import{_ as c,p as f,a as _,b as g,c as y}from"./index.f939be45.js";import{r as V}from"./uni-app.es.31704e0f.js";import{_ as h}from"./_plugin-vue_export-helper.1b428a4d.js";const x=h({__name:"login",setup(h){const x=e(),w=a(null),b=s({email:"",password:""}),k={email:{rules:[{required:!0,errorMessage:"必填项"},{format:"email",errorMessage:"邮件格式错误"}]}},j=()=>{w.value.validate().then((e=>{f("api/mobile/elogin",b).then((e=>{if(console.log(e),e.success){const a=e.data.userinfo;x.setToken(a.token),x.fillUser(a)}})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e)}))};function v(){n({url:"/pages/index/register",success(e){console.log(e)},fail(e){console.log(e)}})}return(e,a)=>{const s=d,n=t,f=V(m("uni-easyinput"),_),h=V(m("uni-forms-item"),g),x=p,z=V(m("uni-forms"),y);return l(),o(n,null,{default:r((()=>[u(n,{class:"logo"},{default:r((()=>[u(s,{src:c})])),_:1}),u(z,{class:"myForm",ref_key:"myForm",ref:w,modelValue:b,rules:k},{default:r((()=>[u(h,{name:"email"},{default:r((()=>[u(f,{class:"input",modelValue:b.email,"onUpdate:modelValue":a[0]||(a[0]=e=>b.email=e),placeholder:"请输入电子邮箱","suffix-icon":"email"},null,8,["modelValue"])])),_:1}),u(h,{name:"password"},{default:r((()=>[u(f,{class:"input",type:"password",modelValue:b.password,"onUpdate:modelValue":a[1]||(a[1]=e=>b.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),u(x,{type:"primary",onClick:j},{default:r((()=>[i("用户登录")])),_:1}),u(n,{class:"logo-extra"},{default:r((()=>[u(x,{type:"default",size:"mini"},{default:r((()=>[i("忘记密码")])),_:1}),u(x,{type:"default",size:"mini",onClick:v},{default:r((()=>[i("用户注册")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-1abb0ea5"]]);export{x as default};
